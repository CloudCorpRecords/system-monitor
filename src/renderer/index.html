<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' https://generativelanguage.googleapis.com http://localhost:11434">
  <title>System Monitor</title>
  <link rel="stylesheet" href="./styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <div class="app">
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <div class="logo-icon">‚ö°</div>
          <span>System Monitor</span>
        </div>
      </div>
      <ul class="nav-menu">
        <li class="nav-item active" data-panel="dashboard">
          <span class="nav-icon">üìä</span>
          <span>Dashboard</span>
        </li>
        <li class="nav-item" data-panel="cpu">
          <span class="nav-icon">üî≤</span>
          <span>CPU</span>
        </li>
        <li class="nav-item" data-panel="memory">
          <span class="nav-icon">üíæ</span>
          <span>Memory</span>
        </li>
        <li class="nav-item" data-panel="disk">
          <span class="nav-icon">üíø</span>
          <span>Storage</span>
        </li>
        <li class="nav-item" data-panel="network">
          <span class="nav-icon">üåê</span>
          <span>Network</span>
        </li>
        <li class="nav-item" data-panel="security">
          <span class="nav-icon">üõ°Ô∏è</span>
          <span>Security</span>
        </li>
        <li class="nav-item" data-panel="dependencies">
          <span class="nav-icon">üì¶</span>
          <span>Dependencies</span>
        </li>
        <li class="nav-item" data-panel="optimizer">
          <span class="nav-icon">üöÄ</span>
          <span>Optimizer</span>
        </li>
        <li class="nav-item" data-panel="ai-chat">
          <span class="nav-icon">ü§ñ</span>
          <span>AI Assistant</span>
        </li>
        <li class="nav-item" data-panel="settings">
          <span class="nav-icon">‚öôÔ∏è</span>
          <span>Settings</span>
        </li>
      </ul>
      <div class="sidebar-footer">
        <div class="system-status">
          <span class="status-dot"></span>
          <span>System Healthy v1.6</span>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="content">
      <!-- Dashboard Panel -->
      <div id="dashboard" class="panel active">
        <header class="panel-header">
          <h1>System Overview</h1>
          <div class="header-info">
            <span id="hostname" class="hostname"></span>
            <span id="uptime" class="uptime"></span>
          </div>
        </header>

        <div class="dashboard-grid">
          <div class="stat-card cpu-card">
            <div class="stat-header">
              <span class="stat-icon">üî≤</span>
              <span class="stat-title">CPU Usage</span>
            </div>
            <div class="gauge-container">
              <svg class="gauge" viewBox="0 0 100 100">
                <circle class="gauge-bg" cx="50" cy="50" r="45" />
                <circle class="gauge-fill cpu-gauge" cx="50" cy="50" r="45" id="cpu-gauge" />
              </svg>
              <div class="gauge-value" id="cpu-value">0%</div>
            </div>
            <div class="stat-detail" id="cpu-cores"></div>
          </div>

          <div class="stat-card memory-card">
            <div class="stat-header">
              <span class="stat-icon">üíæ</span>
              <span class="stat-title">Memory</span>
            </div>
            <div class="gauge-container">
              <svg class="gauge" viewBox="0 0 100 100">
                <circle class="gauge-bg" cx="50" cy="50" r="45" />
                <circle class="gauge-fill memory-gauge" cx="50" cy="50" r="45" id="memory-gauge" />
              </svg>
              <div class="gauge-value" id="memory-value">0%</div>
            </div>
            <div class="stat-detail" id="memory-detail"></div>
          </div>

          <div class="stat-card disk-card">
            <div class="stat-header">
              <span class="stat-icon">üíø</span>
              <span class="stat-title">Storage</span>
            </div>
            <div class="gauge-container">
              <svg class="gauge" viewBox="0 0 100 100">
                <circle class="gauge-bg" cx="50" cy="50" r="45" />
                <circle class="gauge-fill disk-gauge" cx="50" cy="50" r="45" id="disk-gauge" />
              </svg>
              <div class="gauge-value" id="disk-value">0%</div>
            </div>
            <div class="stat-detail" id="disk-detail"></div>
          </div>

          <div class="stat-card battery-card">
            <div class="stat-header">
              <span class="stat-icon">üîã</span>
              <span class="stat-title">Battery</span>
            </div>
            <div class="gauge-container">
              <svg class="gauge" viewBox="0 0 100 100">
                <circle class="gauge-bg" cx="50" cy="50" r="45" />
                <circle class="gauge-fill battery-gauge" cx="50" cy="50" r="45" id="battery-gauge" />
              </svg>
              <div class="gauge-value" id="battery-value">N/A</div>
            </div>
            <div class="stat-detail" id="battery-detail"></div>
          </div>
        </div>

        <div class="sensors-section" style="margin-bottom: 24px;">
          <h2 style="margin-bottom: 16px; font-size: 1.1rem; font-weight: 600;">Hardware Sensors</h2>
          <div class="sensors-grid"
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 16px;">
            <!-- CPU Temp -->
            <div class="sensor-card"
              style="padding: 20px; background: var(--bg-secondary); border-radius: 16px; border: 1px solid var(--border-color);">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <span style="display: flex; align-items: center; gap: 8px; color: var(--text-secondary);">
                  <span>üå°Ô∏è</span> CPU Temperature
                </span>
                <span id="sensor-cpu-temp" style="font-weight: 700; font-size: 1.2rem;">--¬∞C</span>
              </div>
              <div style="height: 8px; background: var(--bg-tertiary); border-radius: 4px; overflow: hidden;">
                <div id="sensor-cpu-bar"
                  style="height: 100%; width: 0%; background: linear-gradient(90deg, #3b82f6, #ef4444); border-radius: 4px; transition: width 0.5s ease;">
                </div>
              </div>
            </div>

            <!-- GPU -->
            <div class="sensor-card"
              style="padding: 20px; background: var(--bg-secondary); border-radius: 16px; border: 1px solid var(--border-color);">
              <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <span style="display: flex; align-items: center; gap: 8px; color: var(--text-secondary);">
                  <span>üéÆ</span> GPU Status
                </span>
                <span id="sensor-gpu-util" style="font-weight: 700;">--</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; font-size: 0.9rem; color: var(--text-secondary);">
                <span id="sensor-gpu-model">...</span>
                <span id="sensor-gpu-temp">--¬∞C</span>
              </div>
            </div>
          </div>
        </div>

        <div class="processes-section">
          <h2>Top Processes</h2>
          <div class="processes-table">
            <div class="table-header">
              <span>Name</span>
              <span>CPU</span>
              <span>Memory</span>
              <span>Status</span>
            </div>
            <div class="table-body" id="processes-list"></div>
          </div>
        </div>
      </div>

      <!-- CPU Panel -->
      <div id="cpu" class="panel">
        <header class="panel-header">
          <h1>CPU Details</h1>
        </header>
        <div class="detail-content">
          <div class="info-cards">
            <div class="info-card">
              <h3>Processor</h3>
              <p id="cpu-brand">Loading...</p>
            </div>
            <div class="info-card">
              <h3>Speed</h3>
              <p id="cpu-speed">Loading...</p>
            </div>
            <div class="info-card">
              <h3>Cores</h3>
              <p id="cpu-cores-detail">Loading...</p>
            </div>
            <div class="info-card">
              <h3>Temperature</h3>
              <p id="cpu-temp">Loading...</p>
            </div>
          </div>
          <div class="cores-grid" id="cores-grid"></div>
        </div>
      </div>

      <!-- Memory Panel -->
      <div id="memory" class="panel">
        <header class="panel-header">
          <h1>Memory Details</h1>
        </header>
        <div class="detail-content">
          <div class="memory-overview">
            <div class="memory-bar-container">
              <div class="memory-bar" id="memory-bar-fill"></div>
            </div>
            <div class="memory-labels">
              <span id="memory-used-label">Used: 0 GB</span>
              <span id="memory-total-label">Total: 0 GB</span>
            </div>
          </div>
          <div class="info-cards">
            <div class="info-card">
              <h3>Total RAM</h3>
              <p id="ram-total">Loading...</p>
            </div>
            <div class="info-card">
              <h3>Available</h3>
              <p id="ram-available">Loading...</p>
            </div>
            <div class="info-card">
              <h3>Swap Used</h3>
              <p id="swap-used">Loading...</p>
            </div>
            <div class="info-card">
              <h3>Swap Total</h3>
              <p id="swap-total">Loading...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Disk Panel -->
      <div id="disk" class="panel">
        <header class="panel-header">
          <h1>Storage Details</h1>
        </header>
        <div class="detail-content">
          <div class="disks-grid" id="disks-grid"></div>
        </div>
      </div>

      <!-- Network Panel -->
      <div id="network" class="panel">
        <header class="panel-header">
          <h1>Network Details</h1>
        </header>
        <div class="detail-content">
          <div class="network-stats">
            <div class="info-card download-card">
              <h3>Download</h3>
              <p id="net-download">0 KB/s</p>
            </div>
            <div class="info-card upload-card">
              <h3>Upload</h3>
              <p id="net-upload">0 KB/s</p>
            </div>
            <div class="info-card">
              <h3>Active Connections</h3>
              <p id="net-connections">0</p>
            </div>
          </div>

          <div class="speedtest-section"
            style="margin: 24px 0; padding: 20px; background: var(--bg-secondary); border-radius: 12px; border: 1px solid var(--border-color);">
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <div>
                <h3 style="margin: 0; margin-bottom: 4px; font-size: 1.1em;">Speed Test</h3>
                <p style="margin: 0; font-size: 0.85em; opacity: 0.7;">Test connection quality</p>
              </div>
              <button id="run-speedtest" class="btn btn-primary" style="padding: 8px 16px;">Run Test üöÄ</button>
            </div>
            <div id="speedtest-results"
              style="margin-top: 16px; display: none; padding-top: 16px; border-top: 1px solid var(--border-color);">
              <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; font-size: 0.9em;">
                <div>‚Üì <strong id="st-download">--</strong> Mbps</div>
                <div>‚Üë <strong id="st-upload">--</strong> Mbps</div>
                <div>‚ö° <strong id="st-response">--</strong> RPM</div>
              </div>
            </div>
          </div>
          <div class="interfaces-list" id="interfaces-list"></div>
        </div>
      </div>

      <!-- Dependencies Panel -->
      <!-- Security Panel -->
      <div id="security" class="panel">
        <header class="panel-header">
          <h1>Cyber Shield üõ°Ô∏è</h1>
        </header>
        <div class="dashboard-grid" style="grid-template-columns: 1fr 1fr;">
          <div class="card">
            <h3>Sentinel AI</h3>
            <div style="display:flex; align-items:center; color: #4ade80; margin: 10px 0;">
              <div
                style="width:10px; height:10px; background:#4ade80; border-radius:50%; margin-right:8px; box-shadow: 0 0 10px #4ade80;">
              </div>
              <strong>Active & Monitoring</strong>
            </div>
            <p style="opacity: 0.8; font-size: 0.9em;">Watching Network Ports & Process Spawns for anomalies.</p>
          </div>

          <div class="card">
            <h3>System AdBlock</h3>
            <p style="margin-bottom:15px; font-size: 0.9em; opacity: 0.8;">Block ads/trackers in all apps via
              /etc/hosts.</p>
            <div class="toggle-container">
              <button id="btn-enable-adblock" class="btn btn-primary" style="width: 100%;">Enable Shield</button>
              <button id="btn-disable-adblock" class="btn btn-danger" style="display:none; width: 100%;">Disable
                Shield</button>
            </div>
            <small style="opacity:0.5; display:block; margin-top:8px; font-size: 0.8em;">* Requires Admin
              Password</small>
          </div>
        </div>

        <div class="card" style="margin-top: 20px;">
          <div style="display:flex; justify-content:space-between; align-items:center">
            <h3>Network Radar üì°</h3>
            <button id="btn-scan-network" class="btn btn-primary">Scan LAN</button>
          </div>
          <pre id="network-scan-results"
            style="margin-top:15px; padding: 15px; background: #000; border-radius: 8px; min-height:150px; color: #0f0; font-family: monospace; overflow-x: auto;">Ready to scan...</pre>
        </div>

        <!-- Red Team Scanner -->
        <div class="card" style="margin-top: 20px; border: 1px solid #ef444455;">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 15px;">
            <h3 style="color: #ef4444;">Red Team Recon üéØ</h3>
          </div>
          <div style="display: flex; gap: 10px; margin-bottom: 15px;">
            <input type="text" id="red-team-target" placeholder="Target IP (e.g. 192.168.1.1)"
              style="flex:1; padding: 10px; background: #1a1a2e; border: 1px solid #333; color: white; border-radius: 6px;">
            <button id="btn-red-team-scan" class="btn btn-danger"
              style="background: #ef4444; color: white; border:none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Scan
              Target</button>
            <button id="btn-red-team-auto" class="btn btn-danger"
              style="background: #b91c1c; color: white; border:none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Auto
              Recon üöÄ</button>
          </div>
          <pre id="red-team-results"
            style="padding: 15px; background: #000; border-radius: 8px; min-height:100px; color: #ef4444; font-family: monospace; overflow-x: auto;">Enter a target IP to check for vulnerabilities...</pre>
        </div>
      </div>

      <div id="dependencies" class="panel">
        <header class="panel-header">
          <h1>Dependency Manager</h1>
          <div class="header-actions">
            <button class="btn btn-primary" id="scan-all-deps">Scan All</button>
          </div>
        </header>
        <div class="detail-content">
          <div class="deps-tabs">
            <button class="deps-tab active" data-type="npm">npm</button>
            <button class="deps-tab" data-type="pip">pip</button>
            <button class="deps-tab" data-type="brew">Homebrew</button>
          </div>
          <div class="deps-content">
            <div class="deps-summary">
              <span id="deps-total">0 packages</span>
              <span id="deps-outdated" class="outdated-badge">0 outdated</span>
            </div>
            <div class="deps-actions">
              <button class="btn btn-secondary" id="update-all-deps">Update All Outdated</button>
            </div>
            <div class="deps-list" id="deps-list">
              <p class="deps-placeholder">Click "Scan All" to discover packages</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Optimizer Panel -->
      <div id="optimizer" class="panel">
        <header class="panel-header">
          <h1>System Optimizer</h1>
        </header>
        <div class="detail-content">
          <div class="optimizer-cards">
            <div class="optimizer-card">
              <div class="optimizer-icon">üóëÔ∏è</div>
              <h3>Clear Cache</h3>
              <p id="cache-size">Calculating...</p>
              <button class="btn btn-primary" id="clear-cache-btn">Clear Cache</button>
            </div>
            <div class="optimizer-card">
              <div class="optimizer-icon">üí®</div>
              <h3>Free Memory</h3>
              <p>Release inactive memory</p>
              <button class="btn btn-secondary" id="free-memory-btn">Optimize Memory</button>
            </div>
            <div class="optimizer-card">
              <div class="optimizer-icon">üöÄ</div>
              <h3>Startup Items</h3>
              <p id="startup-count">Loading...</p>
              <button class="btn btn-secondary" id="view-startup-btn">View Items</button>
            </div>
          </div>
          <div class="startup-list hidden" id="startup-list"></div>
          <div class="optimizer-log" id="optimizer-log"></div>
        </div>
      </div>

      <!-- AI Chat Panel -->
      <div id="ai-chat" class="panel">
        <header class="panel-header">
          <h1>AI Assistant</h1>
          <div class="header-info">
            <span id="memory-stats" class="memory-badge" title="AI Memory">üß† <span id="memory-count">0</span>
              memories</span>
            <span id="ai-provider-badge" class="interface-type">Not configured</span>
            <button class="btn btn-sm btn-secondary" id="clear-memory-btn" title="Clear AI Memory">Clear Memory</button>
          </div>
        </header>
        <div class="detail-content">
          <div class="chat-container">
            <div class="chat-messages" id="chat-messages">
              <div class="chat-welcome">
                <div class="chat-welcome-icon">ü§ñ</div>
                <h3>AI System Assistant</h3>
                <p>Ask me to analyze your system, optimize performance, or update dependencies.</p>
                <div class="quick-actions">
                  <button class="btn btn-secondary btn-sm"
                    onclick="app.quickChat('Analyze my system performance')">Analyze System</button>
                  <button class="btn btn-secondary btn-sm" onclick="app.quickChat('What can be optimized?')">Suggest
                    Optimizations</button>
                  <button class="btn btn-secondary btn-sm" onclick="app.quickChat('Check my dependencies')">Check
                    Dependencies</button>
                </div>
              </div>
            </div>
            <div class="chat-input-area">
              <input type="text" id="chat-input" placeholder="Ask the AI to help optimize your system..." />
              <button class="btn btn-primary" id="chat-send-btn">Send</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Panel -->
      <div id="settings" class="panel">
        <header class="panel-header">
          <h1>Settings</h1>
        </header>
        <div class="detail-content">
          <!-- Quick Setup Section -->
          <div class="settings-section" id="quick-setup-section">
            <h2>üöÄ Quick Setup</h2>
            <div class="settings-card quick-setup-card">
              <div class="quick-setup-content">
                <div class="quick-setup-icon">ü§ñ</div>
                <h3>Set Up Local AI Assistant</h3>
                <p>One click to install everything you need for offline AI that can control your computer.</p>
                <button class="btn btn-primary btn-large" id="quick-setup-btn">
                  <span class="btn-text">‚ö° Quick Setup</span>
                </button>
                <div id="setup-progress" class="setup-progress hidden">
                  <div class="setup-step-item" id="setup-step-1">
                    <span class="step-icon">‚è≥</span>
                    <span class="step-text">Installing Ollama...</span>
                  </div>
                  <div class="setup-step-item" id="setup-step-2">
                    <span class="step-icon">‚è≥</span>
                    <span class="step-text">Starting server...</span>
                  </div>
                  <div class="setup-step-item" id="setup-step-3">
                    <span class="step-icon">‚è≥</span>
                    <span class="step-text">Downloading AI model...</span>
                  </div>
                </div>
                <div id="setup-status" class="setup-status"></div>
              </div>
            </div>
          </div>

          <!-- AI Provider Section -->
          <div class="settings-section">
            <h2>AI Provider</h2>
            <div class="settings-card">
              <div class="setting-row">
                <label>Provider</label>
                <select id="ai-provider-select">
                  <option value="gemini">Google Gemini (Cloud)</option>
                  <option value="ollama">Ollama (Local - Recommended)</option>
                </select>
              </div>
              <div class="setting-row" id="gemini-settings">
                <label>Gemini API Key</label>
                <input type="password" id="gemini-key-input" placeholder="Enter your Gemini API key" />
                <p class="setting-hint">Get your API key from <a href="https://aistudio.google.com/apikey"
                    target="_blank">Google AI Studio</a></p>
              </div>
              <div class="setting-row hidden" id="ollama-settings">
                <div class="ollama-status-bar" id="ollama-status-bar">
                  <span id="ollama-install-status">Checking...</span>
                </div>
              </div>
              <button class="btn btn-primary" id="save-ai-settings">Save Settings</button>
            </div>
          </div>

          <!-- Installed Models Section -->
          <div class="settings-section" id="models-section">
            <h2>Installed Models</h2>
            <div class="settings-card">
              <div id="models-list">Loading...</div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script type="module" src="./index.js"></script>
</body>

</html>